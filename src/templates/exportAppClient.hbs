{{>header}}

import type { BaseHttpRequest } from './core';
import { {{{httpClientRequest}}} } from './core';
import type { ClientConfig } from './core';
{{#if services}}
import {
{{#each services}}
    {{{name}}},
{{/each}}
} from './services';
{{/if}}

export class {{{clientName}}} {
{{#each services}}
    readonly {{{shortName}}}: {{{name}}};
{{/each}}

    constructor(ClientConfig: ClientConfig, httpClient: BaseHttpRequest = new {{{httpClientRequest}}}()) {
        const config = {
            baseUrl: ClientConfig?.baseUrl ?? '{{{server}}}',
            version: ClientConfig?.version ?? '{{{version}}}',
            withCredentials: ClientConfig?.withCredentials ?? false,
            token: ClientConfig?.token,
            username: ClientConfig?.username,
            password: ClientConfig?.password,
            headers: ClientConfig?.headers,
        }
        {{#each services}}
        this.{{{shortName}}} = new {{{name}}}(httpClient, config);
        {{/each}}
    }
}
