{{>header}}

import type { BaseHttpRequest } from './core';
import { {{{httpClientRequest}}} } from './core';
import type { OpenAPIConfig } from './core';
{{#if services}}
import {
{{#each services}}
    {{{name}}},
{{/each}}
} from './services';
{{/if}}

export class {{{clientName}}} {
{{#each services}}
    readonly {{{shortName}}}: {{{name}}};
{{/each}}

    constructor(openApiConfig: OpenAPIConfig, httpClient: BaseHttpRequest = new {{{httpClientRequest}}}()) {
        const config = {
            baseUrl: openApiConfig?.baseUrl ?? '{{{server}}}',
            version: openApiConfig?.version ?? '{{{version}}}',
            withCredentials: openApiConfig?.withCredentials ?? false,
            token: openApiConfig?.token,
            username: openApiConfig?.username,
            password: openApiConfig?.password,
            headers: openApiConfig?.headers,
        }
        {{#each services}}
        this.{{{shortName}}} = new {{{name}}}(httpClient, config);
        {{/each}}
    }
}
